<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title id="pageTitle">Frontend Developer Roadmap - Masar</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="icon" href="favicon.ico">
  <!-- Google Fonts for modern look -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <link rel="stylesheet" href="../css/front_end.css">
  <link rel="stylesheet" href="../css/progress_tracking.css">
  <style>
    /* Beautiful Animated Search Bar */
    .search-container {
      position: relative;
      transition: all 0.3s ease;
    }

    .search-bar {
      display: flex;
      align-items: center;
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(20px);
      border: 2px solid rgba(255, 255, 255, 0.2);
      border-radius: 25px;
      padding: 0.5rem 1rem;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
      min-width: 50px;
      max-width: 50px;
    }

    .search-bar.active {
      max-width: 300px;
      min-width: 300px;
      background: rgba(255, 255, 255, 0.25);
      border-color: rgba(0, 184, 148, 0.4);
      box-shadow: 
        0 10px 30px rgba(0, 184, 148, 0.3),
        0 0 0 1px rgba(255, 255, 255, 0.3);
    }

    .search-bar::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: left 0.6s ease;
    }

    .search-bar:hover::before {
      left: 100%;
    }

    .search-icon {
      color: rgba(255, 255, 255, 0.8);
      font-size: 1.1rem;
      cursor: pointer;
      transition: all 0.3s ease;
      z-index: 2;
      position: relative;
    }

    .search-bar.active .search-icon {
      color: #00b894;
      transform: scale(1.1);
    }

    .search-input {
      background: transparent;
      border: none;
      outline: none;
      color: white;
      font-size: 0.95rem;
      font-weight: 500;
      width: 0;
      opacity: 0;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      margin-left: 0.5rem;
      position: relative;
      z-index: 2;
    }

    .search-bar.active .search-input {
      width: 200px;
      opacity: 1;
      margin-left: 0.8rem;
    }

    .search-input::placeholder {
      color: rgba(255, 255, 255, 0.6);
      font-weight: 400;
    }

    .search-clear {
      background: none;
      border: none;
      color: rgba(255, 255, 255, 0.6);
      cursor: pointer;
      font-size: 0.9rem;
      padding: 0.2rem;
      border-radius: 50%;
      transition: all 0.3s ease;
      opacity: 0;
      transform: scale(0);
      position: relative;
      z-index: 2;
    }

    .search-bar.active .search-clear {
      opacity: 1;
      transform: scale(1);
    }

    .search-clear:hover {
      color: #e74c3c;
      background: rgba(231, 76, 60, 0.1);
      transform: scale(1.1);
    }

    /* Search Dropdown */
    .search-dropdown {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      border-radius: 15px;
      box-shadow: 
        0 15px 40px rgba(0, 184, 148, 0.3),
        0 8px 25px rgba(0, 0, 0, 0.2);
      border: 1px solid rgba(0, 184, 148, 0.2);
      margin-top: 0.5rem;
      opacity: 0;
      visibility: hidden;
      transform: translateY(-10px) scale(0.95);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      z-index: 1000;
      overflow: hidden;
    }

    .search-dropdown.show {
      opacity: 1;
      visibility: visible;
      transform: translateY(0) scale(1);
    }

    .search-suggestions {
      padding: 0.5rem 0;
    }

    .suggestion-item {
      display: flex;
      align-items: center;
      gap: 0.8rem;
      padding: 0.8rem 1.2rem;
      cursor: pointer;
      transition: all 0.3s ease;
      color: #2d3748;
      font-weight: 500;
      position: relative;
      overflow: hidden;
    }

    .suggestion-item::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      width: 3px;
      height: 100%;
      background: linear-gradient(135deg, #00b894, #00cec9);
      transform: scaleY(0);
      transition: transform 0.3s ease;
    }

    .suggestion-item:hover::before {
      transform: scaleY(1);
    }

    .suggestion-item:hover {
      background: rgba(0, 184, 148, 0.1);
      color: #00b894;
      transform: translateX(5px);
    }

    .suggestion-item i {
      font-size: 1.1rem;
      color: #00b894;
      transition: all 0.3s ease;
    }

    .suggestion-item:hover i {
      transform: scale(1.2) rotate(5deg);
      color: #00cec9;
    }

    .suggestion-item span {
      font-size: 0.95rem;
      transition: all 0.3s ease;
    }

    .suggestion-item:hover span {
      font-weight: 600;
    }

    /* Search Animation Keyframes */
    @keyframes searchPulse {
      0%, 100% {
        transform: scale(1);
        box-shadow: 0 0 0 0 rgba(0, 184, 148, 0.4);
      }
      50% {
        transform: scale(1.05);
        box-shadow: 0 0 0 10px rgba(0, 184, 148, 0);
      }
    }

    @keyframes searchGlow {
      0%, 100% {
        border-color: rgba(255, 255, 255, 0.2);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }
      50% {
        border-color: rgba(0, 184, 148, 0.6);
        box-shadow: 0 8px 25px rgba(0, 184, 148, 0.3);
      }
    }

    .search-bar.searching {
      animation: searchGlow 2s ease-in-out infinite;
    }

    .search-bar.found {
      animation: searchPulse 0.6s ease-in-out;
    }

    /* Responsive Search */
    @media (max-width: 768px) {
      .search-bar.active {
        max-width: 250px;
        min-width: 250px;
      }
      
      .search-bar.active .search-input {
        width: 150px;
      }
      
      .search-dropdown {
        min-width: 280px;
      }
    }

    @media (max-width: 480px) {
      .search-bar.active {
        max-width: 200px;
        min-width: 200px;
      }
      
      .search-bar.active .search-input {
        width: 120px;
      }
      
      .search-dropdown {
        min-width: 250px;
      }
      
      .suggestion-item {
        padding: 0.6rem 1rem;
      }
      
      .suggestion-item span {
        font-size: 0.9rem;
      }
    }

    @keyframes searchRipple {
      to {
        transform: scale(4);
        opacity: 0;
      }
    }
  </style>
</head>
<body>
  <!-- Animated background elements -->
  <div class="animated-bg">
    <div class="floating-shape shape-1"></div>
    <div class="floating-shape shape-2"></div>
    <div class="floating-shape shape-3"></div>
    <div class="floating-shape shape-4"></div>
    <div class="floating-shape shape-5"></div>
  </div>

  <header>
    <div class="logo">
      <span class="masar-logo" id="logoTitle" onclick="window.location.href='home.html'">Masar <i class="fa-solid fa-arrow-up-right"></i><span style="color:#00b6b6;">&#8599;</span></span>
      <div class="subtitle" id="logoSubtitle" onclick="window.location.href='home.html'">From vision to destination</div>
    </div>
    <nav>
      <div class="nav-item dropdown" id="lang-dropdown">
        <i class="fa-solid fa-language"></i> <span id="language">language</span> <i class="fa-solid fa-chevron-down"></i>
        <div class="dropdown-menu">
          <div class="dropdown-item" data-lang="en" id="english">English</div>
          <div class="dropdown-item" data-lang="ar" id="arabic">Arabic</div>
        </div>
      </div>
      <div class="nav-item dropdown" id="fields-dropdown">
        <i class="fa-solid fa-desktop"></i> <span id="fields">Fields</span> <i class="fa-solid fa-chevron-down"></i>
        <div class="dropdown-menu">
          <div class="dropdown-item" onclick="window.location.href='all_roadmaps.html'">All Roadmaps</div>
          <div class="dropdown-item" onclick="window.location.href='front_end.html'">Frontend</div>
          <div class="dropdown-item" onclick="window.location.href='back_end.html'">Backend</div>
          <div class="dropdown-item" onclick="window.location.href='data_science.html'">Data Science</div>
        </div>
      </div>
      <div class="nav-item" id="customerSupport" onclick="window.location.href='contact_us.html'"><i class="fa-solid fa-user-group"></i> <span id="customerSupport-text">Customer support</span></div>
      <div class="nav-item" id="aboutUs" onclick="window.location.href='about_us.html'"><b>!</b> <span id="aboutUs-text">About us</span></div>
      <div class="nav-item search-container" id="search-container">
        <div class="search-bar" id="search-bar">
          <i class="fa-solid fa-magnifying-glass search-icon" id="search-icon"></i>
          <input type="text" class="search-input" id="search-input" placeholder="Search courses..." />
          <button class="search-clear" id="search-clear">
            <i class="fa-solid fa-times"></i>
          </button>
        </div>
        <div class="search-dropdown" id="search-dropdown">
          <div class="search-suggestions">
            <div class="suggestion-item" data-search="html">
              <i class="fa-brands fa-html5"></i>
              <span>HTML</span>
            </div>
            <div class="suggestion-item" data-search="css">
              <i class="fa-brands fa-css3-alt"></i>
              <span>CSS</span>
            </div>
            <div class="suggestion-item" data-search="javascript">
              <i class="fa-brands fa-js"></i>
              <span>JavaScript</span>
            </div>
            <div class="suggestion-item" data-search="react">
              <i class="fa-brands fa-react"></i>
              <span>React.js</span>
            </div>
            <div class="suggestion-item" data-search="responsive">
              <i class="fa-solid fa-mobile-screen"></i>
              <span>Responsive Design</span>
            </div>
          </div>
        </div>
      </div>
    </nav>
  </header>

  <main class="roadmap-main">
    <div class="roadmap-header">
      <h1 id="roadmapTitle">Frontend Developer Roadmap</h1>
      <p id="roadmapDescription">A comprehensive guide to becoming a modern frontend developer. Follow this roadmap to master the essential skills and technologies.</p>
      
      <!-- Progress Indicator -->
      <div class="progress-container">
        <div class="progress-header">
          <h3 id="progressTitle">Your Progress</h3>
          <div class="progress-controls">
            <span class="progress-percentage" id="progress-percentage">0%</span>
            <button class="reset-progress-btn" id="reset-progress-btn" title="Reset Progress">
              <i class="fa-solid fa-rotate-left"></i>
            </button>
          </div>
        </div>
        <div class="progress-bar">
          <div class="progress-fill" id="progress-fill"></div>
        </div>
        <div class="progress-stats">
          <span class="completed-count" id="completed-count">0</span> / <span class="total-count" id="total-count">0</span> courses completed
        </div>
      </div>
    </div>

    <!-- Frontend Development Explanation -->
    <div class="frontend-explanation" id="frontend-explanation">
      <div class="front-content">
        <h2 id="whatIsFrontendTitle">What is Frontend Development?</h2>
        <p id="whatIsFrontendText">
          Click to reveal the answer! üí°
        </p>
        <div class="question-icon">‚ùì</div>
      </div>
      <div class="back-content">
        <h3>Answer:</h3>
        <p>
          <span class="highlight">Frontend development</span>, also known as <span class="highlight">client-side development</span>, is the practice of creating the visual and interactive elements of websites and web applications that users directly interact with. It involves building the <span class="highlight">user interface (UI)</span> and <span class="highlight">user experience (UX)</span> using technologies like <span class="highlight">HTML</span> for structure, <span class="highlight">CSS</span> for styling and layout, and <span class="highlight">JavaScript</span> for interactivity and dynamic functionality.
        </p>
        <p>
          Frontend developers work on everything users see, click, and interact with in their web browsers - from buttons and forms to animations and responsive designs that adapt to different screen sizes. They collaborate closely with designers to bring visual concepts to life and with backend developers to integrate with server-side functionality, ensuring seamless user experiences across all devices and platforms.
        </p>
      
      </div>
    </div>

    <!-- New Roadmap Flow (Linear, Level-based) -->
    <div class="roadmap-legend">
      <span class="legend level1">LEVEL 1</span>
      <span class="legend level2">LEVEL 2</span>
      <span class="legend level3">LEVEL 3</span>
      <span class="legend level4">LEVEL 4</span>
    </div>
    <div class="roadmap-flow">
      <div class="roadmap-row">
        <div class="roadmap-node level1">HTML</div>
        <div class="roadmap-node level1">CSS</div>
      </div>
      <div class="roadmap-row">
        <div class="roadmap-node level1">Rsponsive Design</div>
      </div>
      <div class="roadmap-row">
        <div class="roadmap-node level1">Git & GitHub Basics</div>
      </div>
      <div class="level-separator"></div>
      <div class="roadmap-row">
        <div class="roadmap-node level2">JavaScript Basics</div>
        <div class="roadmap-node level2">Events & Forms</div>
      </div>
      <div class="roadmap-row">
        <div class="roadmap-node level2">JvaScript & DOM</div>
      
        <div class="roadmap-node level2">API & Fetch</div>
      </div>
      <div class="level-separator"></div>
      <div class="roadmap-row">
        <div class="roadmap-node level3">Deploy React Project</div>
        <div class="roadmap-node level3">API Calls in React</div>
      </div>
      <div class="roadmap-row">
        <div class="roadmap-node level3">Adinin Dashboaid</div>
        <div class="roadmap-node level3">Weather App with API</div>
        <div class="roadmap-node level3">To Do App</div>
      </div>
      <div class="roadmap-row">
        <div class="roadmap-node level3">Convert Figma Design to Code</div>
      </div>
      <div class="level-separator"></div>
      <div class="roadmap-row">
        <div class="roadmap-node level4">Project Libraries</div>
        <div class="roadmap-node level4">Projects Organization</div>
      </div>
      <div class="roadmap-row">
        <div class="roadmap-node level4">React.js</div>
        <div class="roadmap-node level4">State Management</div>
        <div class="roadmap-node level4">Routing</div>
      </div>
      <div class="roadmap-row">
        <div class="roadmap-node level4">Projects & Specialization</div>
      </div>
    </div>
    
    <!-- Modal Content Section (hidden by default) -->
    <div id="course-modal" class="modal" style="display:none;">
      <div class="modal-content">
        <span class="close-modal" id="close-modal">&times;</span>
        <div id="modal-title" class="modal-title"></div>
        <div id="modal-description" class="modal-description"></div>
        <div id="modal-resources" class="modal-resources"></div>
        
        <!-- Course Status Section -->
        <div class="course-status-section">
          <h4 id="courseStatusTitle">Course Status</h4>
          <div class="status-options">
            <button class="status-btn not-started active" data-status="not-started">
              <i class="fa-solid fa-circle"></i>
              <span id="statusNotStarted">Not Started</span>
            </button>
            <button class="status-btn in-progress" data-status="in-progress">
              <i class="fa-solid fa-play"></i>
              <span id="statusInProgress">In Progress</span>
            </button>
            <button class="status-btn completed" data-status="completed">
              <i class="fa-solid fa-check"></i>
              <span id="statusCompleted">Completed</span>
            </button>
          </div>
        </div>
      </div>
    </div>

  </main>

  <footer>
    <div class="footer-content">
      <div class="footer-section">
        <h3 id="footerLogoTitle">Masar</h3>
        <p id="footerLogoSubtitle">From vision to destination</p>
      </div>
      <div class="footer-section">
        <h4 id="footerQuickLinks">Quick Links</h4>
        <ul>
          <li><a href="home.html" id="footerHome">Home</a></li>
          <li><a href="all_roadmaps.html" id="footerRoadmap">All Roadmaps</a></li>
          <li><a href="contact_us.html" id="footerContact">Contact</a></li>
        </ul>
      </div>
      <div class="footer-section">
        <h4 id="footerSupport">Support</h4>
        <ul>
          <li><a href="#" id="footerHelpCenter">Help Center</a></li>
          <li><a href="#" id="footerPrivacyPolicy">Privacy Policy</a></li>
          <li><a href="#" id="footerTermsOfService">Terms of Service</a></li>
        </ul>
      </div>
    </div>
    <div class="footer-bottom">
      <p id="footerCopyright">&copy; 2025 Masar. All rights reserved.</p>
    </div>
  </footer>

  <script>
    // Progress Tracking System
    let courseProgress = {};
    let currentCourse = null;
    let allProgressData = {};
    
    // Load progress from JSON file
    async function loadProgressFromJSON() {
      try {
        const response = await fetch('../json/progress_tracking.json');
        if (response.ok) {
          allProgressData = await response.json();
          courseProgress = allProgressData.frontend || {};
          console.log('Progress loaded from JSON:', courseProgress);
        } else {
          console.warn('Could not load progress from JSON, starting fresh');
          courseProgress = {};
        }
      } catch (error) {
        console.error('Error loading progress from JSON:', error);
        courseProgress = {};
      }
    }
    
    // Save progress to JSON file
    async function saveProgressToJSON() {
      try {
        // Update the frontend progress in the main data object
        allProgressData.frontend = courseProgress;
        allProgressData.last_updated = new Date().toISOString();
        
        // Try to save to server first (if available)
        try {
          const serverResponse = await fetch('../api/save_progress.php', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify(allProgressData)
          });
          
          if (serverResponse.ok) {
            const result = await serverResponse.json();
            console.log('Progress saved to server:', result);
          } else {
            throw new Error('Server save failed');
          }
        } catch (serverError) {
          console.log('Server not available, using local storage:', serverError);
          // Fallback to localStorage
          localStorage.setItem('frontendRoadmapProgress', JSON.stringify(courseProgress));
          localStorage.setItem('allProgressData', JSON.stringify(allProgressData));
        }
        
        console.log('Progress saved to JSON structure:', allProgressData);
        
        // Show save confirmation
        showSaveMessage();
      } catch (error) {
        console.error('Error saving progress to JSON:', error);
        // Fallback to localStorage
        localStorage.setItem('frontendRoadmapProgress', JSON.stringify(courseProgress));
      }
    }
    
    // Show save message
    function showSaveMessage() {
      const message = document.createElement('div');
      message.className = 'completion-message save-message';
      
      // Get current language
      const currentLang = document.documentElement.lang || 'en';
      const isArabic = currentLang === 'ar';
      
      const saveText = isArabic ? 'ÿ™ŸÖ ÿ≠ŸÅÿ∏ ÿßŸÑÿ™ŸÇÿØŸÖ ÿ®ŸÜÿ¨ÿßÿ≠! üíæ' : 'Progress saved successfully! üíæ';
      
      message.innerHTML = `
        <div class="completion-content">
          <i class="fa-solid fa-save"></i>
          <span>${saveText}</span>
        </div>
      `;
      document.body.appendChild(message);
      
      // Remove message after 2 seconds
      setTimeout(() => {
        message.remove();
      }, 2000);
    }
    
    // Initialize progress tracking
    async function initializeProgressTracking() {
      // Load saved progress from JSON
      await loadProgressFromJSON();
      
      // Count total courses
      const totalCourses = document.querySelectorAll('.roadmap-node').length;
      document.getElementById('total-count').textContent = totalCourses;
      
      // Update progress display
      updateProgressDisplay();
      
      // Apply saved status to nodes
      applySavedStatus();
    }
    
    // Update progress display
    function updateProgressDisplay() {
      const totalCourses = document.querySelectorAll('.roadmap-node').length;
      const completedCourses = Object.values(courseProgress).filter(status => status === 'completed').length;
      const percentage = totalCourses > 0 ? Math.round((completedCourses / totalCourses) * 100) : 0;
      
      // Update progress bar
      document.getElementById('progress-fill').style.width = percentage + '%';
      document.getElementById('progress-percentage').textContent = percentage + '%';
      document.getElementById('completed-count').textContent = completedCourses;
      
      // Add animation class for smooth transition
      const progressFill = document.getElementById('progress-fill');
      progressFill.style.transition = 'width 0.8s cubic-bezier(0.4, 0, 0.2, 1)';
    }
    
    // Apply saved status to nodes
    function applySavedStatus() {
      document.querySelectorAll('.roadmap-node').forEach(node => {
        const courseName = node.textContent.trim();
        const status = courseProgress[courseName];
        
        if (status) {
          node.classList.remove('not-started', 'in-progress', 'completed');
          node.classList.add(status);
        }
      });
    }
    
    // Reset progress
    function resetProgress() {
      // Get current language
      const currentLang = document.documentElement.lang || 'en';
      const isArabic = currentLang === 'ar';
      
      const confirmMessage = isArabic 
        ? 'ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ£ŸÜŸÉ ÿ™ÿ±ŸäÿØ ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ™ŸÇÿØŸÖÿü ŸÑÿß ŸäŸÖŸÉŸÜ ÿßŸÑÿ™ÿ±ÿßÿ¨ÿπ ÿπŸÜ Ÿáÿ∞ÿß ÿßŸÑÿ•ÿ¨ÿ±ÿßÿ°.'
        : 'Are you sure you want to reset all progress? This action cannot be undone.';
      
      if (confirm(confirmMessage)) {
        courseProgress = {};
        saveProgressToJSON(); // Save reset progress
        
        // Reset all nodes
        document.querySelectorAll('.roadmap-node').forEach(node => {
          node.classList.remove('not-started', 'in-progress', 'completed');
        });
        
        // Update progress display
        updateProgressDisplay();
        
        // Show reset message
        showResetMessage();
      }
    }
    
    // Show reset message
    function showResetMessage() {
      const message = document.createElement('div');
      message.className = 'completion-message reset-message';
      
      // Get current language
      const currentLang = document.documentElement.lang || 'en';
      const isArabic = currentLang === 'ar';
      
      const resetText = isArabic ? 'ÿ™ŸÖ ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ÿßŸÑÿ™ŸÇÿØŸÖ ÿ®ŸÜÿ¨ÿßÿ≠! üîÑ' : 'Progress reset successfully! üîÑ';
      
      message.innerHTML = `
        <div class="completion-content">
          <i class="fa-solid fa-rotate-left"></i>
          <span>${resetText}</span>
        </div>
      `;
      document.body.appendChild(message);
      
      // Remove message after 3 seconds
      setTimeout(() => {
        message.remove();
      }, 3000);
    }
    
    // Update course status
    function updateCourseStatus(courseName, status) {
      const previousStatus = courseProgress[courseName];
      courseProgress[courseName] = status;
      saveProgressToJSON(); // Save progress after update
      
      // Update node appearance
      const node = Array.from(document.querySelectorAll('.roadmap-node')).find(n => n.textContent.trim() === courseName);
      if (node) {
        node.classList.remove('not-started', 'in-progress', 'completed');
        node.classList.add(status);
      }
      
      // Update progress display
      updateProgressDisplay();
      
      // Celebration effect when completing a course
      if (status === 'completed' && previousStatus !== 'completed') {
        celebrateCompletion();
      }
    }
    
    // Celebration effect
    function celebrateCompletion() {
      const progressContainer = document.querySelector('.progress-container');
      progressContainer.classList.add('celebration');
      
      // Remove celebration class after animation
      setTimeout(() => {
        progressContainer.classList.remove('celebration');
      }, 500);
      
      // Show completion message
      showCompletionMessage();
    }
    
    // Show completion message
    function showCompletionMessage() {
      const message = document.createElement('div');
      message.className = 'completion-message';
      
      // Get current language
      const currentLang = document.documentElement.lang || 'en';
      const isArabic = currentLang === 'ar';
      
      const completionText = isArabic ? 'ŸÖÿ®ÿ±ŸàŸÉ! ŸÑŸÇÿØ ÿ£ŸÉŸÖŸÑÿ™ ÿØŸàÿ±ÿ© ÿ¨ÿØŸäÿØÿ©! üéâ' : 'Congratulations! You completed a new course! üéâ';
      
      message.innerHTML = `
        <div class="completion-content">
          <i class="fa-solid fa-trophy"></i>
          <span>${completionText}</span>
        </div>
      `;
      document.body.appendChild(message);
      
      // Remove message after 3 seconds
      setTimeout(() => {
        message.remove();
      }, 3000);
    }
    
    // Language switching and translation functionality
    document.addEventListener('DOMContentLoaded', async function() {
      let translations = {};
      let currentLang = localStorage.getItem('selectedLanguage') || 'en'; // Get saved language or default to 'en'

      // Initialize progress tracking
      await initializeProgressTracking();

      // Fetch translations
      fetch('../json/roadmap.json')
        .then(response => response.json())
        .then(data => {
          translations = data;
          console.log('Translations loaded successfully:', data);
          setLanguage(currentLang);
        })
        .catch(error => {
          console.error('Error loading translations:', error);
          // Fallback to home translations if roadmap.json doesn't exist
          fetch('../json/home language.json')
            .then(response => response.json())
            .then(data => {
              translations = data;
              setLanguage(currentLang);
            });
        });

      // Dropdown functionality
      const dropdowns = document.querySelectorAll('.dropdown');
      dropdowns.forEach(dropdown => {
        const chevron = dropdown.querySelector('.fa-chevron-down');
        dropdown.addEventListener('click', function(e) {
          e.stopPropagation();
          dropdowns.forEach(otherDropdown => {
            if (otherDropdown !== dropdown) {
              otherDropdown.classList.remove('active');
              const otherChevron = otherDropdown.querySelector('.fa-chevron-down');
              if (otherChevron) otherChevron.style.transform = 'rotate(0deg)';
            }
          });
          
          this.classList.toggle('active');
          if (chevron) {
            chevron.style.transform = this.classList.contains('active') ? 'rotate(180deg)' : 'rotate(0deg)';
          }
        });

        // Dropdown item click
        const dropdownItems = dropdown.querySelectorAll('.dropdown-item');
        dropdownItems.forEach(item => {
          item.addEventListener('click', function(e) {
            e.stopPropagation();
            // Language switching
            if (item.dataset.lang) {
              currentLang = item.dataset.lang;
              localStorage.setItem('selectedLanguage', currentLang); // Save language preference
              setLanguage(currentLang);
            }
            dropdown.classList.remove('active');
            const chevron = dropdown.querySelector('.fa-chevron-down');
            if (chevron) chevron.style.transform = 'rotate(0deg)';
          });
        });
      });

      // Close dropdowns when clicking outside
      document.addEventListener('click', function() {
        dropdowns.forEach(dropdown => {
          dropdown.classList.remove('active');
          const chevron = dropdown.querySelector('.fa-chevron-down');
          if (chevron) chevron.style.transform = 'rotate(0deg)';
        });
      });

      // Node click functionality with progress tracking
      const nodes = document.querySelectorAll('.roadmap-node');
      const modal = document.getElementById('course-modal');
      
      if (nodes.length > 0 && modal) {
        nodes.forEach(node => {
          node.addEventListener('click', function() {
            const nodeName = this.textContent.trim();
            currentCourse = nodeName;
            
            // Show loading state
            const modalTitle = document.getElementById('modal-title');
            const modalDescription = document.getElementById('modal-description');
            const modalResources = document.getElementById('modal-resources');
            
            if (modalTitle) modalTitle.textContent = 'ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ...';
            if (modalDescription) modalDescription.textContent = '';
            if (modalResources) modalResources.innerHTML = '';
            
            fetch('../json/roadmap_courses.json')
              .then(response => {
                if (!response.ok) {
                  throw new Error('Network response was not ok');
                }
                return response.json();
              })
              .then(data => {
                const info = data[nodeName] || {};
                if (modalTitle) modalTitle.textContent = info.title || nodeName;
                if (modalDescription) modalDescription.textContent = info.description || 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸàÿµŸÅ ŸÖÿ™ÿßÿ≠ ŸÑŸáÿ∞Ÿá ÿßŸÑÿØŸàÿ±ÿ©.';
                
                let resourcesHTML = '';
                if (info.resources && info.resources.length) {
                  resourcesHTML = '<ul>' + info.resources.map(r => `<li><a href="${r.url}" target="_blank">${r.name}</a></li>`).join('') + '</ul>';
                } else {
                  resourcesHTML = '<p>ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖŸàÿßÿ±ÿØ ŸÖÿ™ÿßÿ≠ÿ© ÿ≠ÿßŸÑŸäÿßŸã.</p>';
                }
                if (modalResources) modalResources.innerHTML = resourcesHTML;
                
                // Set current status in modal
                const currentStatus = courseProgress[nodeName] || 'not-started';
                setStatusButtonActive(currentStatus);
                
                modal.style.display = 'block';
              })
              .catch(error => {
                console.error('Error loading course data:', error);
                // Fallback content
                if (modalTitle) modalTitle.textContent = nodeName;
                if (modalDescription) modalDescription.textContent = 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸàÿµŸÅ ŸÖÿ™ÿßÿ≠ ŸÑŸáÿ∞Ÿá ÿßŸÑÿØŸàÿ±ÿ©.';
                if (modalResources) modalResources.innerHTML = '<p>ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖŸàÿßÿ±ÿØ ŸÖÿ™ÿßÿ≠ÿ© ÿ≠ÿßŸÑŸäÿßŸã.</p>';
                
                // Set current status in modal
                const currentStatus = courseProgress[nodeName] || 'not-started';
                setStatusButtonActive(currentStatus);
                
                modal.style.display = 'block';
              });
          });
        });
      }
    });

    // Set status button active
    function setStatusButtonActive(status) {
      document.querySelectorAll('.status-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      document.querySelector(`.status-btn[data-status="${status}"]`).classList.add('active');
    }

    // Status button click handlers
    document.addEventListener('DOMContentLoaded', function() {
      const statusButtons = document.querySelectorAll('.status-btn');
      statusButtons.forEach(btn => {
        btn.addEventListener('click', function() {
          const status = this.dataset.status;
          if (currentCourse) {
            updateCourseStatus(currentCourse, status);
            setStatusButtonActive(status);
          }
        });
      });
    });

    // Set language from translations
    function setLanguage(lang) {
      if (!translations[lang]) {
        console.error('Translations not found for language:', lang);
        return;
      }
      const t = translations[lang];
      
      // Set document direction and language
      document.documentElement.lang = lang;
      document.body.dir = lang === 'ar' ? 'rtl' : 'ltr';
      
      console.log('Setting language to:', lang);
      console.log('Available translation keys:', Object.keys(t));
      
      // Update all elements with translations
      Object.keys(t).forEach(key => {
        const element = document.getElementById(key);
        if (element) {
          element.innerHTML = t[key];
          console.log('Updated element:', key, 'with:', t[key]);
        } else {
          console.warn('Element not found for key:', key);
        }
      });
      
      // Also update title element
      const titleElement = document.getElementById('pageTitle');
      if (titleElement && t.pageTitle) {
        document.title = t.pageTitle;
      }
    }
  </script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const modal = document.getElementById('course-modal');
      const closeModal = document.getElementById('close-modal');
      const resetProgressBtn = document.getElementById('reset-progress-btn');
      
      // Frontend explanation flip animation
      const frontendExplanation = document.getElementById('frontend-explanation');
      if (frontendExplanation) {
        frontendExplanation.addEventListener('click', function() {
          this.classList.toggle('flipped');
        });
      }
      
      // Modal close functionality
      if (closeModal) {
        closeModal.onclick = function() {
          modal.style.display = 'none';
        };
      }
      
      window.onclick = function(event) {
        if (event.target === modal) {
          modal.style.display = 'none';
        }
      };

      // Reset progress button functionality
      if (resetProgressBtn) {
        resetProgressBtn.addEventListener('click', resetProgress);
      }
      
      // Add keyboard support for modal
      document.addEventListener('keydown', function(event) {
        if (event.key === 'Escape' && modal.style.display === 'block') {
          modal.style.display = 'none';
        }
      });

      // Beautiful Search Bar Functionality
      const searchContainer = document.getElementById('search-container');
      const searchBar = document.getElementById('search-bar');
      const searchIcon = document.getElementById('search-icon');
      const searchInput = document.getElementById('search-input');
      const searchClear = document.getElementById('search-clear');
      const searchDropdown = document.getElementById('search-dropdown');
      const suggestionItems = document.querySelectorAll('.suggestion-item');

      // Toggle search bar
      searchIcon.addEventListener('click', function() {
        if (!searchBar.classList.contains('active')) {
          activateSearch();
        }
      });

      // Activate search function
      function activateSearch() {
        searchBar.classList.add('active');
        searchInput.focus();
        setTimeout(() => {
          searchDropdown.classList.add('show');
        }, 300);
        
        // Add searching animation
        searchBar.classList.add('searching');
        setTimeout(() => {
          searchBar.classList.remove('searching');
        }, 2000);
      }

      // Deactivate search function
      function deactivateSearch() {
        searchBar.classList.remove('active');
        searchDropdown.classList.remove('show');
        searchInput.value = '';
        searchInput.blur();
      }

      // Clear search
      searchClear.addEventListener('click', function(e) {
        e.stopPropagation();
        searchInput.value = '';
        searchInput.focus();
      });

      // Search input functionality
      searchInput.addEventListener('input', function() {
        const query = this.value.toLowerCase();
        
        if (query.length > 0) {
          searchBar.classList.add('searching');
          filterSuggestions(query);
        } else {
          searchBar.classList.remove('searching');
          showAllSuggestions();
        }
      });

      // Filter suggestions
      function filterSuggestions(query) {
        suggestionItems.forEach(item => {
          const text = item.querySelector('span').textContent.toLowerCase();
          if (text.includes(query)) {
            item.style.display = 'flex';
            item.style.animation = 'searchPulse 0.3s ease-in-out';
          } else {
            item.style.display = 'none';
          }
        });
      }

      // Show all suggestions
      function showAllSuggestions() {
        suggestionItems.forEach(item => {
          item.style.display = 'flex';
          item.style.animation = '';
        });
      }

      // Handle suggestion clicks
      suggestionItems.forEach(item => {
        item.addEventListener('click', function() {
          const searchTerm = this.getAttribute('data-search');
          searchInput.value = this.querySelector('span').textContent;
          
          // Add found animation
          searchBar.classList.add('found');
          setTimeout(() => {
            searchBar.classList.remove('found');
          }, 600);
          
          // Navigate to specific course
          navigateToCourse(searchTerm);
          
          // Close search after a delay
          setTimeout(() => {
            deactivateSearch();
          }, 1000);
        });
      });

      // Navigate to specific course
      function navigateToCourse(searchTerm) {
        // Find the course node and trigger click
        const courseNodes = document.querySelectorAll('.roadmap-node');
        courseNodes.forEach(node => {
          const nodeText = node.textContent.trim().toLowerCase();
          if (nodeText.includes(searchTerm.toLowerCase())) {
            node.click();
            return;
          }
        });
      }

      // Close search when clicking outside
      document.addEventListener('click', function(e) {
        if (!searchContainer.contains(e.target)) {
          deactivateSearch();
        }
      });

      // Keyboard navigation
      searchInput.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
          deactivateSearch();
        } else if (e.key === 'Enter') {
          const query = this.value.toLowerCase();
          navigateToCourse(query);
          deactivateSearch();
        }
      });

      // Add hover effects to search bar
      searchBar.addEventListener('mouseenter', function() {
        if (!this.classList.contains('active')) {
          this.style.transform = 'scale(1.05)';
          this.style.boxShadow = '0 8px 25px rgba(0, 184, 148, 0.2)';
        }
      });

      searchBar.addEventListener('mouseleave', function() {
        if (!this.classList.contains('active')) {
          this.style.transform = 'scale(1)';
          this.style.boxShadow = 'none';
        }
      });

      // Add ripple effect to search icon
      searchIcon.addEventListener('click', function(e) {
        const ripple = document.createElement('span');
        ripple.className = 'search-ripple';
        ripple.style.cssText = `
          position: absolute;
          border-radius: 50%;
          background: rgba(0, 184, 148, 0.6);
          transform: scale(0);
          animation: searchRipple 0.6s ease-out;
          pointer-events: none;
          width: 20px;
          height: 20px;
          top: 50%;
          left: 50%;
          margin-top: -10px;
          margin-left: -10px;
          z-index: 1;
        `;
        
        searchBar.appendChild(ripple);
        
        setTimeout(() => {
          ripple.remove();
        }, 600);
      });
    });
  </script>
</body>
</html>
